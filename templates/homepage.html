<!--This page is rendered when URL is "/" 
        and the user input is captured by "/create-account" app route-->

{% extends 'base.html' %}

{%block title %}Civic App Home{% endblock %}

{% block body %}
  
    <br>
  <h2>Search for Events</h2>
    <form action="/" method="POST">
        <div>
            <label><b>Search</b></label>
            <input type="text" name = "keyword" id="keyword">
        </div> 
    <br>
      <div> <label><b>Categories</b></label>
          <br>
          <br>
            <input type="checkbox" name="categories" value="Protest">
            <label>Protest</label>
            <br>
            <input type="checkbox" name = "categories" value="March">
            <label>March</label>
            <br>
            <input type="checkbox" name = "categories" value="Meeting">
            <label>Meeting</label>
            <br>
            <input type="checkbox" name = "categories" value="Canvass">
            <label>Canvass</label>
            <br>
            <input type="checkbox" name = "categories" value="Workshop">
            <label>Workshop</label>
            <!-- <br>
            <input type="checkbox" name = "categories" value="category2">
            <label>category2</label> -->
        </div>
        <br>
        <div>
            <button type = "submit" onclick="save()" name = "button" id ="category_search" >Apply Filters</button>
        </div>
      
    </form>

    <!-- style = "display:none" -->
    <button type = "button" id="clear-button" hidden>Clear Filter</button>

      <br>
      {% if session%} 
        <button type = "button" name = "button" id = "save_to_prefs" hidden>Save Filter</button>
      <br>
     <form>
        <button type = "submit" name = "button" id = "saved_filters">Search by My Filters</button>
     </form>
      {% endif %}
  

      <br>
      <h2>Upcoming Events</h2>
      <br>
      <ul id = "event-list">
        {% if events%}

          {% for event in events %}
          <div class = "event" id ="event-id-{{event.event_id}}"> 
              <div class= "success-msg" id ="success-msg-{{event.event_id}}">

              <h3>{{ event.name }}</h3>
              <p>{{ event.category }}</p>
              <p>{{ event.start_date.strftime("%A %B %d %Y %I:%M %p") }}</p>
              <img src = "{{ event.image }}" width="300" onerror="this.onerror=null; this.remove();">
              <p>{{ event.address}} </p>
              <p>{{ event.description }}</p>

             
              <span class = "buttons">
                <form action="/events/{{event.event_id}}" method="POST" >
                  <button type = "submit" class = "save-button" name = "button" id ="save-event-{{event.event_id}}">Save Event</button>
              </form>
              <br>
              <form action="/events/{{event.event_id}}">
                <button>See Event Details</button>
             </form>
            </span>
              
              <br>
              <br>
            </div>
          </div>
          {% endfor %}

         {% else %}

            <p>No Events Found.</p>

        {% endif %}
      </ul>
  <script src="/static/homepage.js"></script>
{% endblock %}
